<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>FM Scout AI - Tactical v5.0</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        :root { --neon-blue: #00f2ff; --neon-green: #39ff14; }
        body { 
            font-family: 'Rajdhani', sans-serif; 
            background: #050505; 
            color: #e0e0e0; 
            letter-spacing: 0.5px;
        }
        h1, .score-font { font-family: 'Syncopate', sans-serif; text-transform: uppercase; }
        
        /* Saha ve Mevki TasarÄ±mÄ± */
        .pitch { 
            background: linear-gradient(135deg, #0a0f1e 0%, #020617 100%);
            border: 2px solid #1e293b; position: relative; height: 580px;
            border-radius: 30px; box-shadow: inset 0 0 100px rgba(0, 242, 255, 0.05);
        }
        .pos-btn { 
            position: absolute; width: 44px; height: 30px; transform: translate(-50%, -50%);
            background: rgba(15, 23, 42, 0.8); border: 1px solid var(--neon-blue);
            color: var(--neon-blue); font-size: 10px; font-weight: 700;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            clip-path: polygon(10% 0, 100% 0, 90% 100%, 0 100%);
        }
        .pos-btn:hover, .pos-btn.active { 
            background: var(--neon-blue); color: black; box-shadow: 0 0 20px var(--neon-blue);
        }

        /* Kart Stili */
        .scout-card { 
            background: rgba(16, 16, 16, 0.8); 
            border-left: 4px solid #1e293b;
            transition: 0.3s;
        }
        .scout-card:hover { border-left-color: var(--neon-blue); background: rgba(20, 20, 20, 1); }
        
        .stat-box { background: rgba(255, 255, 255, 0.03); border: 1px border rgba(255, 255, 255, 0.05); }
    </style>
</head>
<body class="p-6">

    <div class="max-w-[1500px] mx-auto">
        <header class="flex flex-col md:flex-row justify-between items-center mb-12 gap-6">
            <div class="text-center md:text-left">
                <h1 class="text-4xl font-black tracking-tighter text-white">AI <span class="text-cyan-400">Scout</span> Alpha</h1>
                <p class="text-slate-500 font-medium tracking-[0.4em] text-[10px]">Neural Scouting & Performance Analytics</p>
            </div>
            
            <div class="flex gap-4 glass p-4 rounded-2xl bg-slate-900/40 border border-slate-800">
                <div class="space-y-1">
                    <label class="block text-[10px] uppercase font-bold text-slate-500">Global Lig</label>
                    <select id="leagueID" class="bg-black border border-slate-700 p-2 rounded text-xs outline-none focus:border-cyan-400 w-48">
                        <option value="203">ğŸ‡¹ğŸ‡· SÃ¼per Lig</option>
                        <option value="39">ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿ Premier League</option>
                        <option value="140">ğŸ‡ªğŸ‡¸ La Liga</option>
                        <option value="71">ğŸ‡§ğŸ‡· Serie A</option>
                        <option value="128">ğŸ‡¦ğŸ‡· Arjantin</option>
                        <option value="94">ğŸ‡µğŸ‡¹ Portekiz</option>
                        <option value="88">ğŸ‡³ğŸ‡± Hollanda</option>
                        <option value="40">ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿ Championship</option>
                    </select>
                </div>
                <div class="space-y-1">
                    <label class="block text-[10px] uppercase font-bold text-slate-500">YaÅŸ Limiti</label>
                    <input id="ageMax" type="number" value="23" class="bg-black border border-slate-700 p-2 rounded text-xs w-16 outline-none focus:border-cyan-400">
                </div>
                <button onclick="fetchData()" class="bg-cyan-600 hover:bg-cyan-500 text-black px-6 rounded font-black text-xs transition-all self-end h-9">TARAMAYI BAÅLAT</button>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-10">
            <div class="lg:col-span-5">
                <div class="pitch">
                    <button onclick="selectPos('Goalkeeper', 'GK', this)" class="pos-btn" style="top: 92%; left: 50%;">GK</button>
                    <button onclick="selectPos('Defender', 'DC', this)" class="pos-btn" style="top: 78%; left: 35%;">LDC</button>
                    <button onclick="selectPos('Defender', 'DC', this)" class="pos-btn" style="top: 78%; left: 65%;">RDC</button>
                    <button onclick="selectPos('Midfielder', 'DM', this)" class="pos-btn" style="top: 60%; left: 50%;">DM</button>
                    <button onclick="selectPos('Midfielder', 'MCL', this)" class="pos-btn" style="top: 48%; left: 30%;">MCL</button>
                    <button onclick="selectPos('Midfielder', 'MCR', this)" class="pos-btn" style="top: 48%; left: 70%;">MCR</button>
                    
                    <button onclick="selectPos('Attacker', 'LW', this)" class="pos-btn" style="top: 25%; left: 20%;">LW</button>
                    <button onclick="selectPos('Attacker', 'RW', this)" class="pos-btn" style="top: 25%; left: 80%;">RW</button>
                    <button onclick="selectPos('Attacker', 'ST', this)" class="pos-btn active" style="top: 12%; left: 50%;">ST</button>
                </div>
            </div>

            <div class="lg:col-span-7 h-[600px] overflow-y-auto pr-4 custom-scroll">
                <div id="loader" class="hidden text-center py-20 font-bold text-cyan-400 animate-pulse tracking-widest">CONNECTING TO NEURAL NETWORK...</div>
                <div id="results" class="grid grid-cols-1 gap-4">
                    </div>
            </div>
        </div>
    </div>

    <script>
        const API_KEY = 'bbf2c8b42d6e26a65670f5863d75aab5';
        let activePos = 'ST'; 

        function selectPos(type, short, btn) {
            activePos = short;
            document.querySelectorAll('.pos-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        async function fetchData() {
            const league = document.getElementById('leagueID').value;
            const ageLimit = document.getElementById('ageMax').value;
            const grid = document.getElementById('results');
            const loader = document.getElementById('loader');

            grid.innerHTML = '';
            loader.classList.remove('hidden');

            try {
                const res = await axios.get('https://v3.football.api-sports.io/players', {
                    params: { league: league, season: 2024 },
                    headers: { 'x-apisports-key': API_KEY }
                });

                loader.classList.add('hidden');
                
                // --- AKILLI FÄ°LTRELEME MANTIÄI ---
                const filtered = res.data.response.filter(p => {
                    const stats = p.statistics[0];
                    const age = p.player.age;
                    const pos = stats.games.position;

                    // Mevkiye gÃ¶re derin analiz
                    if (age > ageLimit) return false;
                    
                    if (activePos === 'LW' || activePos === 'RW') {
                        // Kanat oyuncusu ise Attacker olmalÄ± ve tercihen Ã§ok asist veya orta yapmalÄ±
                        return pos === 'Attacker' || pos === 'Midfielder';
                    }
                    if (activePos === 'ST') {
                        // Forvet ise gol sayÄ±sÄ± veya ceza sahasÄ± etkinliÄŸi yÃ¼ksek olmalÄ±
                        return pos === 'Attacker';
                    }
                    return pos.includes(stats.games.position);
                });

                filtered.slice(0, 15).forEach(p => renderPlayerCard(p.player, p.statistics[0]));

            } catch (err) { loader.classList.add('hidden'); console.error(err); }
        }

        function renderPlayerCard(p, s) {
            const g = s.goals.total || 0;
            const a = s.goals.assists || 0;
            const rating = parseFloat(s.games.rating || 0).toFixed(1);
            const fmScore = Math.round((rating * 10) + (p.age < 22 ? 10 : 0));

            document.getElementById('results').innerHTML += `
                <div class="scout-card p-5 rounded-r-2xl flex flex-col md:flex-row justify-between items-center gap-6">
                    <div class="flex items-center gap-6 w-full md:w-1/3">
                        <img src="${p.photo}" class="w-16 h-16 rounded-full bg-slate-800 border-2 border-slate-700">
                        <div>
                            <h3 class="font-bold text-lg text-white leading-tight uppercase">${p.name}</h3>
                            <p class="text-[10px] text-cyan-500 font-bold">${s.team.name} | ${p.age} YAÅ</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-4 gap-4 flex-1 w-full">
                        <div class="stat-box p-2 text-center rounded">
                            <p class="text-[8px] text-slate-500 font-bold">GOL</p>
                            <p class="text-xl font-bold text-white">${g}</p>
                        </div>
                        <div class="stat-box p-2 text-center rounded">
                            <p class="text-[8px] text-slate-500 font-bold">ASÄ°ST</p>
                            <p class="text-xl font-bold text-cyan-400">${a}</p>
                        </div>
                        <div class="stat-box p-2 text-center rounded">
                            <p class="text-[8px] text-slate-500 font-bold">FORM</p>
                            <p class="text-xl font-bold text-yellow-500">${rating}</p>
                        </div>
                        <div class="stat-box p-2 text-center rounded border border-cyan-900/30">
                            <p class="text-[8px] text-cyan-500 font-bold uppercase">AI Skor</p>
                            <p class="text-xl font-black text-white score-font">${fmScore}</p>
                        </div>
                    </div>

                    <div class="text-right w-full md:w-auto">
                        <div class="text-[9px] font-bold ${p.age < 22 ? 'text-green-500' : 'text-slate-500'} uppercase">
                            ${p.age < 22 ? 'â— WONDERKID' : 'â— STABIL'}
                        </div>
                    </div>
                </div>`;
        }
    </script>
</body>
</html>
