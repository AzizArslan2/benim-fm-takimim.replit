<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bursaspor Kadro PlanlayÄ±cÄ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0a0f0a; color: #e5e7eb; font-family: 'Segoe UI', sans-serif; }
        .pitch { 
            background: #1e3d24; 
            border: 4px solid #ffffff33; 
            position: relative; 
            height: 700px; 
            width: 100%;
            border-radius: 10px;
            background-image: repeating-linear-gradient(#244a2b 0, #244a2b 50px, #1e3d24 50px, #1e3d24 100px);
            box-shadow: inset 0 0 100px rgba(0,0,0,0.5);
        }
        .penalty-box { width: 50%; height: 120px; border: 2px solid #ffffff66; position: absolute; left: 25%; }
        .center-circle { width: 140px; height: 140px; border: 2px solid #ffffff66; border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .half-line { width: 100%; height: 2px; background: #ffffff66; position: absolute; top: 50%; }

        .player-slot {
            position: absolute;
            width: 80px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            z-index: 10;
        }
        .kit-icon {
            width: 50px;
            height: 50px;
            margin: 0 auto;
            background: url('https://upload.wikimedia.org/wikipedia/tr/0/00/Bursaspor_logo.png') no-repeat center;
            background-size: 25px;
            background-color: #1a7a3a;
            border: 2px solid white;
            border-radius: 5px;
            clip-path: polygon(20% 0%, 80% 0%, 100% 20%, 100% 100%, 0% 100%, 0% 20%);
        }
        .player-slot.missing .kit-icon { background-color: #dc2626; box-shadow: 0 0 15px #dc2626; }
        .player-name { font-size: 11px; font-weight: bold; background: rgba(0,0,0,0.7); padding: 2px 4px; border-radius: 3px; margin-top: 4px; display: block; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .pos-label { font-size: 10px; color: #fff; font-weight: 800; text-shadow: 1px 1px 2px black; }
    </style>
</head>
<body class="p-4">
    <div class="max-w-7xl mx-auto">
        <header class="flex flex-wrap justify-between items-center mb-6 bg-gray-900 p-4 rounded-xl border-l-8 border-green-600">
            <div class="flex items-center gap-4">
                <img src="https://upload.wikimedia.org/wikipedia/tr/0/00/Bursaspor_logo.png" alt="Bursaspor" class="w-16 h-16 object-contain">
                <div>
                    <h1 class="text-3xl font-bold text-white">BURSASPOR <span class="text-green-500 text-xl italic">FM26 Kadro PlanÄ±</span></h1>
                    <p id="squadInfo" class="text-gray-400 text-sm">Kadro dosyasÄ±nÄ± yÃ¼kleyin ve eksikleri belirleyin.</p>
                </div>
            </div>
            <div class="flex gap-2">
                <input type="file" id="fmFile" class="hidden" onchange="handleFile(this)">
                <button onclick="document.getElementById('fmFile').click()" class="bg-green-600 text-white hover:bg-green-700 px-5 py-2 rounded-md font-bold transition">
                    FM LÄ°STESÄ° YÃœKLE (.CSV)
                </button>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            <div class="space-y-4">
                <div class="bg-gray-800 p-4 rounded-lg border border-gray-700">
                    <label class="block text-xs font-bold text-gray-400 mb-2 uppercase tracking-widest">Taktik DiziliÅŸ</label>
                    <select id="formationSelect" onchange="changeFormation()" class="w-full bg-black border border-gray-600 rounded p-2 text-white outline-none focus:border-green-500">
                        <option value="4231">4 - 2 - 3 - 1 (GeniÅŸ)</option>
                        <option value="442">4 - 4 - 2 (Klasik)</option>
                        <option value="433">4 - 3 - 3 (Ofansif)</option>
                        <option value="352">3 - 5 - 2 (Kanat Bekli)</option>
                    </select>
                </div>

                <div class="bg-gray-800 p-4 rounded-lg border border-gray-700">
                    <h3 class="font-bold text-red-500 mb-3 uppercase tracking-wider text-sm">ðŸ”´ Transfer Gerekenler</h3>
                    <ul id="needsList" class="space-y-2">
                        <li class="text-gray-500 text-xs italic text-center py-4">Sahada boÅŸluklarÄ± tÄ±klayarak iÅŸaretleyin</li>
                    </ul>
                </div>
            </div>

            <div class="lg:col-span-2">
                <div class="pitch" id="pitchContainer">
                    <div class="penalty-box top-0"></div>
                    <div class="penalty-box bottom-0" style="bottom: 0;"></div>
                    <div class="half-line"></div>
                    <div class="center-circle"></div>
                    <div id="playersLayer"></div>
                </div>
            </div>

            <div class="bg-gray-800 p-4 rounded-lg border border-gray-700 flex flex-col h-[700px]">
                <h3 class="font-bold text-green-500 mb-3 uppercase tracking-wider text-sm">ðŸ“‹ Oyuncu Havuzu</h3>
                <div id="squadList" class="overflow-y-auto flex-grow text-xs space-y-1 pr-2">
                    <p class="text-gray-500 italic">HenÃ¼z dosya yÃ¼klenmedi.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const formations = {
            "4231": [
                {p: "KL", b: "90%", l: "45%"},
                {p: "SÄžB", b: "70%", l: "85%"}, {p: "STP", b: "75%", l: "58%"}, {p: "STP", b: "75%", l: "32%"}, {p: "SLB", b: "70%", l: "5%"},
                {p: "MO", b: "55%", l: "55%"}, {p: "MO", b: "55%", l: "35%"},
                {p: "SÄžK", b: "25%", l: "85%"}, {p: "OOS", b: "30%", l: "45%"}, {p: "SLK", b: "25%", l: "5%"},
                {p: "SNT", b: "10%", l: "45%"}
            ],
            "442": [
                {p: "KL", b: "90%", l: "45%"},
                {p: "SÄžB", b: "70%", l: "85%"}, {p: "STP", b: "75%", l: "58%"}, {p: "STP", b: "75%", l: "32%"}, {p: "SLB", b: "70%", l: "5%"},
                {p: "SÄžO", b: "45%", l: "85%"}, {p: "MO", b: "50%", l: "58%"}, {p: "MO", b: "50%", l: "32%"}, {p: "SLO", b: "45%", l: "5%"},
                {p: "SNT", b: "15%", l: "58%"}, {p: "SNT", b: "15%", l: "32%"}
            ],
            "433": [
                {p: "KL", b: "90%", l: "45%"},
                {p: "SÄžB", b: "70%", l: "85%"}, {p: "STP", b: "75%", l: "58%"}, {p: "STP", b: "75%", l: "32%"}, {p: "SLB", b: "70%", l: "5%"},
                {p: "MO", b: "55%", l: "70%"}, {p: "MO", b: "55%", l: "45%"}, {p: "MO", b: "55%", l: "20%"},
                {p: "SÄžK", b: "25%", l: "85%"}, {p: "SNT", b: "10%", l: "45%"}, {p: "SLK", b: "25%", l: "5%"}
            ],
            "352": [
                {p: "KL", b: "90%", l: "45%"},
                {p: "STP", b: "78%", l: "65%"}, {p: "STP", b: "80%", l: "45%"}, {p: "STP", b: "78%", l: "25%"},
                {p: "SÄžKB", b: "50%", l: "88%"}, {p: "MO", b: "55%", l: "60%"}, {p: "MO", b: "55%", l: "45%"}, {p: "MO", b: "55%", l: "30%"}, {p: "SLKB", b: "50%", l: "2%"},
                {p: "SNT", b: "15%", l: "58%"}, {p: "SNT", b: "15%", l: "32%"}
            ]
        };

        let selectedNeeds = new Set();

        function changeFormation() {
            const f = document.getElementById('formationSelect').value;
            renderPlayers(formations[f]);
        }

        function renderPlayers(players) {
            const layer = document.getElementById('playersLayer');
            layer.innerHTML = '';
            players.forEach((player, index) => {
                const key = `${player.p}-${index}`;
                const div = document.createElement('div');
                div.className = `player-slot ${selectedNeeds.has(key) ? 'missing' : ''}`;
                div.style.bottom = player.b;
                div.style.left = player.l;
                
                div.innerHTML = `
                    <div class="pos-label">${player.p}</div>
                    <div class="kit-icon"></div>
                    <div class="player-name">Eksik BÃ¶lge</div>
                `;
                
                div.onclick = () => toggleNeed(player.p, index, div);
                layer.appendChild(div);
            });
        }

        function toggleNeed(pos, index, el) {
            const key = `${pos}-${index}`;
            if (selectedNeeds.has(key)) {
                selectedNeeds.delete(key);
                el.classList.remove('missing');
                el.querySelector('.player-name').innerText = "Eksik BÃ¶lge";
            } else {
                selectedNeeds.add(key);
                el.classList.add('missing');
                el.querySelector('.player-name').innerText = "TRANSFER!";
            }
            updateNeedsList();
        }

        function updateNeedsList() {
            const list = document.getElementById('needsList');
            if (selectedNeeds.size === 0) {
                list.innerHTML = '<li class="text-gray-500 text-xs italic text-center py-4">Sahada boÅŸluklarÄ± tÄ±klayarak iÅŸaretleyin</li>';
                return;
            }
            list.innerHTML = Array.from(selectedNeeds).map(item => {
                const pName = item.split('-')[0];
                return `<li class="bg-red-950 border border-red-800 p-3 rounded-lg text-red-200 text-xs font-bold flex items-center gap-2">
                    <span class="bg-red-600 text-white px-1 rounded">ACÄ°L</span> ${pName} Mevkisi Takviye Edilmeli
                </li>`;
            }).join('');
        }

        function handleFile(input) {
            const reader = new FileReader();
            reader.onload = function() {
                const text = reader.result;
                const rows = text.split('\n');
                const squadListDiv = document.getElementById('squadList');
                squadListDiv.innerHTML = rows.map((line, i) => {
                    if(i === 0 || !line.trim()) return '';
                    return `<div class="bg-gray-700/50 p-2 rounded border border-gray-600 hover:bg-green-900/30 transition cursor-default">
                        ðŸŸ¢ ${line.split(',')[0]}
                    </div>`;
                }).join('');
                document.getElementById('squadInfo').innerText = "Toplam " + (rows.length - 1) + " oyuncu baÅŸarÄ±yla yÃ¼klendi.";
            };
            reader.readAsText(input.files[0]);
        }

        changeFormation();
    </script>
</body>
</html>
