<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FM Scout AI v3.0 - Pro Scouting Network</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Inter:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .cyber-font { font-family: 'Orbitron', sans-serif; }
        .glass-panel { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(51, 65, 85, 0.5); }
    </style>
</head>
<body class="bg-[#020617] text-slate-100 min-h-screen">

    <header class="p-6 border-b border-blue-900/30 glass-panel sticky top-0 z-50 flex justify-between items-center">
        <div class="flex items-center gap-4">
            <div class="h-10 w-1 bg-blue-500 rounded-full animate-pulse"></div>
            <h1 class="cyber-font text-xl font-black tracking-widest text-blue-400">FM SCOUT AI <span class="text-white text-xs opacity-50">PRO EDITION</span></h1>
        </div>
        <div class="flex gap-4 text-[10px] font-mono">
            <div class="px-3 py-1 bg-green-500/10 border border-green-500/30 text-green-400 rounded-full">● API-FOOTBALL CONNECTED</div>
        </div>
    </header>

    <div class="container mx-auto p-6 grid grid-cols-1 lg:grid-cols-12 gap-8">
        
        <aside class="lg:col-span-3 space-y-6">
            <div class="glass-panel p-6 rounded-3xl shadow-2xl">
                <h2 class="text-xs font-black text-blue-500 uppercase mb-6 tracking-widest italic">Operasyon Merkezi</h2>
                
                <div class="space-y-4">
                    <label class="block text-[10px] text-slate-500 font-bold uppercase">Hedef Lig</label>
<select id="leagueID" class="w-full bg-slate-800/50 p-3 rounded-xl border border-slate-700 text-sm focus:border-blue-500 outline-none transition-all">
    <optgroup label="Popüler Ligler">
        <option value="203">Türkiye: Süper Lig</option>
        <option value="39">İngiltere: Premier League</option>
        <option value="140">İspanya: La Liga</option>
        <option value="78">Almanya: Bundesliga</option>
        <option value="135">İtalya: Serie A</option>
        <option value="61">Fransa: Ligue 1</option>
    </optgroup>
    <optgroup label="Yetenek Havuzları">
        <option value="71">Brezilya: Serie A</option>
        <option value="128">Arjantin: Liga Profesional</option>
        <option value="94">Portekiz: Primeira Liga</option>
        <option value="88">Hollanda: Eredivisie</option>
        <option value="144">Belçika: Pro League</option>
        <option value="40">İngiltere: Championship</option>
    </optgroup>
    <optgroup label="Diğer">
        <option value="253">ABD: MLS</option>
        <option value="307">Suudi Arabistan: Pro League</option>
    </optgroup>
</select>
                    <label class="block text-[10px] text-slate-500 font-bold uppercase">Rol Tanımı</label>
                    <select id="position" class="w-full bg-slate-800/50 p-3 rounded-xl border border-slate-700 text-sm focus:border-blue-500 outline-none transition-all">
                        <option value="Goalkeeper">Modern Kaleci</option>
                        <option value="Defender">Savunma Hattı</option>
                        <option value="Midfielder">Orta Saha Orkestrası</option>
                        <option value="Attacker">Hücum Gücü</option>
                    </select>

                    <div class="pt-6">
                        <button onclick="startScouting()" class="w-full bg-blue-600 hover:bg-blue-500 text-white py-4 rounded-2xl font-black text-xs uppercase tracking-widest shadow-lg shadow-blue-500/20 transition-all active:scale-95">
                            ANALİZİ BAŞLAT
                        </button>
                    </div>
                </div>
            </div>
        </aside>

        <main class="lg:col-span-9">
            <div id="loader" class="hidden flex flex-col items-center justify-center py-40">
                <div class="w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"></div>
                <p class="mt-4 cyber-font text-[10px] text-blue-500 tracking-[0.3em] animate-pulse">SİSTEM VERİLERİ ANALİZ EDİYOR...</p>
            </div>

            <div id="scoutGrid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                </div>
        </main>
    </div>

    <script>
        const API_CONFIG = {
            KEY: 'bbf2c8b42d6e26a65670f5863d75aab5',
            HOST: 'v3.football.api-sports.io'
        };

        async function startScouting() {
            const league = document.getElementById('leagueID').value;
            const pos = document.getElementById('position').value;
            const grid = document.getElementById('scoutGrid');
            const loader = document.getElementById('loader');

            grid.innerHTML = '';
            loader.classList.remove('hidden');

            try {
                const response = await axios.get(`https://${API_CONFIG.HOST}/players`, {
                    params: { league: league, season: 2024 },
                    headers: { 'x-apisports-key': API_CONFIG.KEY }
                });

                const players = response.data.response;
                loader.classList.add('hidden');

                players.filter(p => p.statistics[0].games.position === pos).slice(0, 15).forEach(data => {
                    const aiReport = generateAIReport(data);
                    renderPlayerCard(data, aiReport);
                });

            } catch (err) {
                console.error("Scout Error:", err);
                loader.classList.add('hidden');
            }
        }

        function generateAIReport(data) {
            const stats = data.statistics[0];
            const age = data.player.age;
            const rating = parseFloat(stats.games.rating || 0);
            
            let status = age < 22 ? "WONDERKID" : "STREAKING";
            let recommendation = rating > 7.2 ? "HEMEN AL" : "GÖZLEMDE TUT";
            
            // FM Tarzı Puanlama (100 üzerinden)
            let score = (rating * 10) + (age < 23 ? 15 : 5);
            return { score: Math.min(Math.round(score), 99), status, recommendation };
        }

        function renderPlayerCard(data, ai) {
            const grid = document.getElementById('scoutGrid');
            const p = data.player;
            const s = data.statistics[0];

            grid.innerHTML += `
                <div class="glass-panel rounded-3xl overflow-hidden hover:border-blue-400/50 transition-all group">
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-6">
                            <div class="relative">
                                <img src="${p.photo}" class="w-20 h-20 rounded-2xl object-cover bg-slate-800 ring-4 ring-slate-900 shadow-2xl">
                                <span class="absolute -bottom-2 -right-2 bg-blue-600 text-[10px] font-black px-2 py-1 rounded-lg">${p.age}</span>
                            </div>
                            <div class="text-right">
                                <p class="cyber-font text-3xl font-black text-white">${ai.score}</p>
                                <p class="text-[8px] font-bold text-blue-500 uppercase tracking-widest italic">PRO RATING</p>
                            </div>
                        </div>

                        <h3 class="font-bold text-lg text-white group-hover:text-blue-400 transition-colors truncate">${p.name}</h3>
                        <p class="text-[10px] text-slate-500 font-bold uppercase mb-4">${s.team.name}</p>

                        <div class="grid grid-cols-2 gap-3 mb-6">
                            <div class="bg-slate-800/50 p-3 rounded-xl">
                                <p class="text-[8px] text-slate-500 uppercase font-bold">Maç/Rating</p>
                                <p class="text-xs font-bold">${s.games.appearences} / <span class="text-yellow-500">${parseFloat(s.games.rating).toFixed(1)}</span></p>
                            </div>
                            <div class="bg-slate-800/50 p-3 rounded-xl">
                                <p class="text-[8px] text-slate-500 uppercase font-bold">Karar</p>
                                <p class="text-[10px] font-black text-green-400 uppercase tracking-tighter">${ai.recommendation}</p>
                            </div>
                        </div>

                        <div class="space-y-2">
                            <div class="flex justify-between text-[9px] font-bold text-slate-500 uppercase"><span>Fiziksel Kondisyon</span><span>%${85 + Math.floor(Math.random() * 15)}</span></div>
                            <div class="w-full bg-slate-800 h-1 rounded-full overflow-hidden">
                                <div class="bg-gradient-to-r from-blue-600 to-cyan-400 h-full" style="width: 90%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html>
