<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRO-SCOUT AI | GLOBAL LIVE ENGINE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --neon: #00f2ff; --bg: #05070a; --panel: #0d1117; }
        body { background: var(--bg); color: #e6edf3; font-family: 'Inter', sans-serif; }
        
        /* SAHA TASARIMI */
        .pitch { 
            background: #080a0f; border: 2px solid #1a1d23; position: relative; height: 700px; width: 100%; border-radius: 20px;
            background-image: 
                linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);
            background-size: 50px 50px;
        }
        .pitch-line { position: absolute; border: 1px solid rgba(255,255,255,0.1); }
        .center-circle { border-radius: 50%; width: 150px; height: 150px; left: 50%; top: 50%; transform: translate(-50%, -50%); }

        /* OYUNCU İKONLARI */
        .player-slot { 
            position: absolute; width: 80px; text-align: center; z-index: 10; 
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1); cursor: pointer;
        }
        .icon-circle { 
            width: 40px; height: 40px; margin: 0 auto; background: #000; border: 2px solid var(--neon); 
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.3);
        }
        .icon-circle span { font-size: 10px; font-weight: bold; color: var(--neon); }

        /* ANALİZ KARTI */
        .scout-card {
            background: var(--panel); border: 1px solid #1f2937; padding: 12px; border-radius: 12px;
            margin-bottom: 8px; border-left: 3px solid var(--neon); transition: 0.2s;
        }
        .scout-card:hover { transform: scale(1.02); background: #161b22; }

        .btn-action {
            background: var(--neon); color: #000; font-weight: 800; padding: 10px 20px;
            border-radius: 8px; font-size: 11px; text-transform: uppercase;
        }
        .active-mode { box-shadow: 0 0 20px var(--neon); border-color: var(--neon) !important; }
    </style>
</head>
<body class="p-6">

    <div class="max-w-[1600px] mx-auto">
        <header class="flex flex-col lg:flex-row justify-between items-center mb-8 gap-4 bg-[#0d1117] p-6 rounded-2xl border border-gray-800">
            <div class="flex items-center gap-4">
                <h1 class="text-xl font-black italic">PRO-SCOUT <span class="text-[var(--neon)]">LIVE</span></h1>
                <select id="formation" onchange="changeFormation()" class="bg-gray-900 border border-gray-700 text-xs p-2 rounded">
                    <option value="433">4-3-3 ATTACK</option>
                    <option value="442">4-4-2 CLASSIC</option>
                    <option value="352">3-5-2 WINGBACK</option>
                </select>
                <button onclick="toggleAnalysis('ball')" id="ballMode" class="text-[10px] border border-gray-700 p-2 rounded uppercase font-bold">Toplu Alan</button>
                <button onclick="toggleAnalysis('space')" id="spaceMode" class="text-[10px] border border-gray-700 p-2 rounded uppercase font-bold">Topsuz Alan</button>
            </div>
            
            <div class="flex items-center gap-4">
                <div id="loader" class="hidden text-[10px] text-yellow-500 animate-pulse mono">WEB SORGUSU ATILIYOR...</div>
                <button onclick="fetchWikiData()" class="btn-action">KÜRESEL TARAMA BAŞLAT</button>
            </div>
        </header>

        <div class="grid grid-cols-12 gap-8">
            <div class="col-span-12 xl:col-span-3">
                <h3 class="text-xs font-bold text-gray-500 mb-4 uppercase tracking-widest">Canlı Oyuncu Akışı</h3>
                <div id="scoutResults" class="max-h-[700px] overflow-y-auto pr-2 space-y-3">
                    <p class="text-xs italic text-gray-600">Wikipedia veri tabanından canlı oyuncu çekmek için taramayı başlatın.</p>
                </div>
            </div>

            <div class="col-span-12 xl:col-span-6">
                <div class="pitch" id="pitch">
                    <div class="pitch-line center-circle"></div>
                    <div id="pitchPlayers"></div>
                </div>
            </div>

            <div class="col-span-12 xl:col-span-3">
                <div class="bg-[#0d1117] p-6 rounded-2xl border border-gray-800 mb-6">
                    <h3 class="text-xs font-bold text-[var(--neon)] mb-4 uppercase tracking-widest">Yedek Kulübesi</h3>
                    <div id="bench" class="min-h-[150px] space-y-2 border-b border-gray-800 pb-4"></div>
                    
                    <div class="mt-6">
                        <h3 class="text-xs font-bold text-gray-500 mb-4 uppercase tracking-widest">Performans Kıyaslama</h3>
                        <div id="comparison" class="text-[10px] space-y-2">
                            <p class="text-gray-600 italic">Kıyaslamak için iki oyuncuyu seçin.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // FORMASYON DATA
        const formations = {
            "433": [
                {pos: "KL", t: 88, l: 45}, {pos: "STP", t: 75, l: 35}, {pos: "STP", t: 75, l: 55},
                {pos: "SLB", t: 68, l: 15}, {pos: "SĞB", t: 68, l: 75}, {pos: "MO", t: 55, l: 45},
                {pos: "MO", t: 45, l: 30}, {pos: "MO", t: 45, l: 60}, {pos: "SLK", t: 25, l: 20},
                {pos: "SĞK", t: 25, l: 70}, {pos: "SNT", t: 10, l: 45}
            ],
            "442": [
                {pos: "KL", t: 88, l: 45}, {pos: "STP", t: 75, l: 35}, {pos: "STP", t: 75, l: 55},
                {pos: "SLB", t: 68, l: 15}, {pos: "SĞB", t: 68, l: 75}, {pos: "MO", t: 50, l: 35},
                {pos: "MO", t: 50, l: 55}, {pos: "SLK", t: 45, l: 15}, {pos: "SĞK", t: 45, l: 75},
                {pos: "SNT", t: 15, l: 35}, {pos: "SNT", t: 15, l: 55}
            ],
            "352": [
                {pos: "KL", t: 88, l: 45}, {pos: "STP", t: 75, l: 30}, {pos: "STP", t: 75, l: 45},
                {pos: "STP", t: 75, l: 60}, {pos: "MO", t: 55, l: 45}, {pos: "MO", t: 45, l: 30},
                {pos: "MO", t: 45, l: 60}, {pos: "SLB", t: 45, l: 10}, {pos: "SĞB", t: 45, l: 80},
                {pos: "SNT", t: 15, l: 40}, {pos: "SNT", t: 15, l: 50}
            ]
        };

        let currentFormation = "433";
        let squad = Array(11).fill(null);
        let bench = [];

        async function fetchWikiData() {
            const loader = document.getElementById('loader');
            const resDiv = document.getElementById('scoutResults');
            loader.classList.remove('hidden');
            resDiv.innerHTML = '<div class="text-xs animate-pulse">Küresel Wikipedia verileri kazınıyor...</div>';

            const query = `
                SELECT DISTINCT ?name ?teamName ?goals ?matches ?nat WHERE {
                    ?player a <http://dbpedia.org/ontology/SoccerPlayer> ;
                            <http://xmlns.com/foaf/0.1/name> ?name ;
                            <http://dbpedia.org/ontology/team> ?team .
                    ?team <http://xmlns.com/foaf/0.1/name> ?teamName .
                    OPTIONAL { ?player <http://dbpedia.org/ontology/goals> ?goals }
                    OPTIONAL { ?player <http://dbpedia.org/ontology/statMatches> ?matches }
                    ?player <http://dbpedia.org/ontology/birthPlace> ?place .
                    ?place <http://xmlns.com/foaf/0.1/name> ?nat .
                } LIMIT 15
            `;

            try {
                const response = await fetch("https://dbpedia.org/sparql?query=" + encodeURIComponent(query) + "&format=json");
                const data = await response.json();
                const players = data.results.bindings;

                resDiv.innerHTML = "";
                players.forEach(p => {
                    const name = p.name.value;
                    const stats = {
                        goals: p.goals ? p.goals.value : "0",
                        matches: p.matches ? p.matches.value : "0",
                        team: p.teamName.value,
                        nat: p.nat.value
                    };
                    resDiv.innerHTML += `
                        <div class="scout-card">
                            <h4 class="text-xs font-bold text-white uppercase">${name}</h4>
                            <p class="text-[9px] text-gray-500 mb-2">${stats.team} | ${stats.nat}</p>
                            <div class="flex gap-2 text-[8px] mb-3">
                                <span class="bg-blue-900/30 px-1">GOL: ${stats.goals}</span>
                                <span class="bg-blue-900/30 px-1">MAÇ: ${stats.matches}</span>
                            </div>
                            <button onclick='addToSquad("${name}", ${JSON.stringify(stats)})' class="text-[8px] font-black text-[var(--neon)] uppercase underline">Kadraya Al</button>
                        </div>
                    `;
                });
            } catch (e) { console.error(e); } finally { loader.classList.add('hidden'); }
        }

        function renderPitch() {
            const pitch = document.getElementById('pitchPlayers');
            pitch.innerHTML = "";
            formations[currentFormation].forEach((pos, i) => {
                const player = squad[i];
                const div = document.createElement('div');
                div.className = "player-slot";
                div.style.top = pos.t + "%";
                div.style.left = pos.l + "%";
                div.innerHTML = `
                    <div class="icon-circle"><span>${pos.pos}</span></div>
                    <div class="text-[8px] font-bold mt-1 uppercase text-gray-300 whitespace-nowrap">${player ? player.name : 'Boş'}</div>
                `;
                pitch.appendChild(div);
            });
        }

        function addToSquad(name, stats) {
            const firstEmpty = squad.indexOf(null);
            if(firstEmpty !== -1) {
                squad[firstEmpty] = {name, ...stats};
            } else {
                bench.push({name, ...stats});
                renderBench();
            }
            renderPitch();
            updateComparison();
        }

        function renderBench() {
            const bDiv = document.getElementById('bench');
            bDiv.innerHTML = bench.map(p => `
                <div class="p-2 bg-white/5 border border-white/10 text-[9px] flex justify-between">
                    <span>${p.name}</span>
                    <span class="text-gray-500">${p.team}</span>
                </div>
            `).join('');
        }

        function changeFormation() {
            currentFormation = document.getElementById('formation').value;
            renderPitch();
        }

        function toggleAnalysis(mode) {
            document.querySelectorAll('.player-slot').forEach(el => {
                if(mode === 'ball') {
                    el.style.transform = "scale(1.2)";
                    document.getElementById('ballMode').classList.add('active-mode');
                    document.getElementById('spaceMode').classList.remove('active-mode');
                } else {
                    el.style.transform = "translate(15px, -15px)";
                    document.getElementById('spaceMode').classList.add('active-mode');
                    document.getElementById('ballMode').classList.remove('active-mode');
                }
            });
        }

        function updateComparison() {
            const comp = document.getElementById('comparison');
            const activePlayers = squad.filter(p => p !== null);
            if(activePlayers.length >= 2) {
                const p1 = activePlayers[0];
                const p2 = activePlayers[1];
                comp.innerHTML = `
                    <div class="grid grid-cols-2 gap-2 text-center border border-gray-800 p-2">
                        <div class="border-r border-gray-800">
                            <p class="font-bold text-[var(--neon)]">${p1.name}</p>
                            <p>Gol: ${p1.goals}</p>
                        </div>
                        <div>
                            <p class="font-bold text-[var(--neon)]">${p2.name}</p>
                            <p>Gol: ${p2.goals}</p>
                        </div>
                    </div>
                `;
            }
        }

        renderPitch();
    </script>
</body>
</html>
