<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FM26 Live Web-Scout & Strategy Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --team-color: #1a7a3a; --accent-blue: #3b82f6; }
        body { background-color: #0d1117; color: #e6edf3; font-family: 'Inter', sans-serif; overflow: hidden; }
        
        /* SAHA TASARIMI */
        .pitch { 
            background: #1e3d24; border: 4px solid #ffffff33; position: relative; height: 700px; width: 100%; border-radius: 24px;
            background-image: repeating-linear-gradient(#244a2b 0, #244a2b 50px, #1e3d24 50px, #1e3d24 100px);
            box-shadow: inset 0 0 100px rgba(0,0,0,0.8); transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .pitch.defensive { background-color: #2b1a1a; background-image: repeating-linear-gradient(#3d1e1e 0, #3d1e1e 50px, #2b1a1a 50px, #2b1a1a 100px); }

        /* OYUNCU ƒ∞KONLARI */
        .player-slot { position: absolute; width: 100px; text-align: center; z-index: 20; transition: all 0.5s ease; }
        .kit-icon { 
            width: 56px; height: 56px; margin: 0 auto; background-color: var(--team-color); 
            border: 2px solid white; border-radius: 14px; cursor: grab; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 6px 15px rgba(0,0,0,0.5); transition: transform 0.2s;
        }
        .kit-icon:active { cursor: grabbing; transform: scale(1.1); }
        .drag-over .kit-icon { border: 3px dashed #fbbf24; background-color: rgba(251, 191, 36, 0.3); }

        .player-name-label { 
            font-size: 10px; font-weight: bold; background: rgba(0,0,0,0.9); padding: 4px; 
            border-radius: 6px; margin-top: 8px; border: 1px solid #444; min-height: 24px; color: white;
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
        }

        /* SCOUT KARTLARI */
        .scout-card { 
            background: #161b22; border: 1px solid #30363d; padding: 12px; border-radius: 12px; 
            transition: 0.3s; border-left: 4px solid var(--accent-blue);
        }
        .scout-card:hover { border-left-color: #10b981; background: #1c2128; transform: translateX(4px); }
        
        .bench-item { 
            cursor: grab; background: #161b22; border: 1px solid #30363d; padding: 12px; 
            border-radius: 12px; font-size: 11px; font-weight: 700; transition: 0.2s;
        }
        .bench-item:hover { border-color: var(--team-color); }

        .status-dot { display: inline-block; width: 8px; height: 8px; background: #10b981; border-radius: 50%; margin-right: 6px; box-shadow: 0 0 8px #10b981; }
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #30363d; border-radius: 10px; }
    </style>
</head>
<body class="p-4 lg:p-6">
    <div class="max-w-[1600px] mx-auto">
        <header class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6 bg-gray-900 p-6 rounded-3xl border border-gray-800 shadow-2xl">
            <div>
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center font-black">AI</div>
                    <h1 class="text-xl font-black tracking-tighter uppercase">Live Web-Scout <span class="text-blue-500">Pro</span></h1>
                </div>
                <div class="mt-2 text-[10px] text-gray-500 font-bold"><span class="status-dot animate-pulse"></span> ONLINE: WEB_DATABASE_V26</div>
            </div>

            <div class="space-y-3">
                <button onclick="fetchLiveScoutData()" id="scoutBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-black py-3 rounded-xl text-xs uppercase shadow-lg shadow-blue-600/20 transition-all flex items-center justify-center gap-2">
                    üåê WEB KAYNAƒûINDAN OYUNCU BUL
                </button>
                <div id="loader" class="hidden text-[10px] text-center text-blue-400 font-bold animate-pulse tracking-widest uppercase">Veri Kaynaƒüƒ±na Baƒülanƒ±lƒ±yor...</div>
            </div>

            <div class="flex bg-black p-1.5 rounded-2xl border border-gray-800 h-fit my-auto">
                <button id="btnAtk" onclick="switchTacticMode('attack')" class="flex-1 py-3 text-[10px] font-black rounded-xl bg-green-700 text-white">TOPLU OYUN</button>
                <button id="btnDef" onclick="switchTacticMode('defense')" class="flex-1 py-3 text-[10px] font-black rounded-xl text-gray-500">TOPSUZ OYUN</button>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <div class="lg:col-span-3">
                <div class="bg-gray-900 p-6 rounded-3xl border border-gray-800 h-[700px] flex flex-col shadow-xl">
                    <h3 class="text-xs font-black text-blue-400 mb-6 uppercase flex justify-between tracking-widest">
                        üì° WEB SONU√áLARI <span id="resCount" class="text-gray-600">0</span>
                    </h3>
                    <div id="scoutResults" class="flex-grow overflow-y-auto space-y-4 pr-2">
                        <div class="text-gray-600 text-[11px] text-center mt-20 italic">Eksik mevkiler i√ßin canlƒ± web taramasƒ± yapƒ±n.</div>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-6">
                <div class="pitch" id="pitch"><div id="pitchPlayers"></div></div>
            </div>

            <div class="lg:col-span-3">
                <div class="bg-gray-900 p-6 rounded-3xl border border-gray-800 h-[700px] flex flex-col shadow-xl">
                    <h3 class="text-xs font-black text-green-500 mb-6 uppercase tracking-widest">üí∫ OYUNCU HAVUZU</h3>
                    <div id="bench" class="flex-grow overflow-y-auto space-y-3 pr-2"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const formations = {
            "attack": [{p:"KL",b:"90%",l:"45%"},{p:"STP",b:"78%",l:"58%"},{p:"STP",b:"78%",l:"32%"},{p:"SLB",b:"70%",l:"8%"},{p:"SƒûB",b:"70%",l:"82%"},{p:"DOS",b:"60%",l:"55%"},{p:"DOS",b:"60%",l:"35%"},{p:"SLK",b:"28%",l:"8%"},{p:"SƒûK",b:"28%",l:"82%"},{p:"OOS",b:"32%",l:"45%"},{p:"SNT",b:"10%",l:"45%"}],
            "defense": [{p:"KL",b:"93%",l:"45%"},{p:"STP",b:"85%",l:"55%"},{p:"STP",b:"85%",l:"35%"},{p:"SLB",b:"82%",l:"12%"},{p:"SƒûB",b:"82%",l:"78%"},{p:"MO",b:"70%",l:"50%"},{p:"MO",b:"70%",l:"35%"},{p:"MO",b:"70%",l:"65%"},{p:"SLK",b:"60%",l:"15%"},{p:"SƒûK",b:"60%",l:"75%"},{p:"SNT",b:"45%",l:"45%"}]
        };

        let squad = Array(11).fill("---");
        let pool = ["Kerem Matƒ±≈ülƒ±", "Yiƒüit Fidan", "Ertuƒürul Ersoy"];
        let currentMode = 'attack';

        // ASENKRON WEB SCOUT MOTORU
        async function fetchLiveScoutData() {
            const btn = document.getElementById('scoutBtn');
            const loader = document.getElementById('loader');
            const container = document.getElementById('scoutResults');
            
            btn.disabled = true;
            loader.classList.remove('hidden');
            container.innerHTML = '';

            // MEVKƒ∞YE G√ñRE AKILLI WEB SORGUSU (Sim√ºlasyon)
            const emptyIdx = squad.indexOf("---");
            const targetPos = emptyIdx !== -1 ? formations[currentMode][emptyIdx].p : "GENEL";

            try {
                // Burada dƒ±≈ü API fetch i≈ülemi sim√ºle ediliyor
                const response = await new Promise((resolve) => {
                    setTimeout(() => {
                        const globalDB = [
                            {n:"Lamine Yamal", p:"SƒûK", c:"Barcelona", v:"150M ‚Ç¨", r:"Wonderkid"},
                            {n:"Warren Za√Øre-Emery", p:"MO", c:"PSG", v:"80M ‚Ç¨", r:"Elit"},
                            {n:"Arda G√ºler", p:"OOS", c:"R. Madrid", v:"45M ‚Ç¨", r:"Teknik"},
                            {n:"Giorgio Scalvini", p:"STP", c:"Atalanta", v:"40M ‚Ç¨", r:"Wonderkid"},
                            {n:"Kenan Yƒ±ldƒ±z", p:"OOS", c:"Juventus", v:"40M ‚Ç¨", r:"Yƒ±ldƒ±z"},
                            {n:"Endrick", p:"SNT", c:"R. Madrid", v:"60M ‚Ç¨", r:"Wonderkid"},
                            {n:"Pau Cubars√≠", p:"STP", c:"Barcelona", v:"35M ‚Ç¨", r:"Gen√ß"},
                            {n:"Semih Kƒ±lƒ±√ßsoy", p:"SNT", c:"Be≈üikta≈ü", v:"20M ‚Ç¨", r:"F/P"}
                        ];
                        // Eƒüer mevki bo≈üsa ona uygun olanlarƒ±, deƒüilse karƒ±≈üƒ±k √∂ner
                        const filtered = targetPos === "GENEL" ? globalDB : globalDB.filter(x => x.p.includes(targetPos.substring(0,2)));
                        resolve(filtered.length > 0 ? filtered : globalDB.sort(() => 0.5 - Math.random()).slice(0, 4));
                    }, 1200);
                });

                loader.classList.add('hidden');
                btn.disabled = false;
                renderScoutCards(response, targetPos);
            } catch (e) {
                container.innerHTML = '<div class="text-red-500 text-xs">Baƒülantƒ± Hatasƒ±!</div>';
            }
        }

        function renderScoutCards(players, target) {
            const container = document.getElementById('scoutResults');
            document.getElementById('resCount').innerText = players.length;
            container.innerHTML = `<div class="text-[9px] text-gray-500 font-bold mb-2 uppercase tracking-tighter">Web Kaynaƒüƒ±: ${target} Profilleri</div>`;
            
            players.forEach(p => {
                container.innerHTML += `
                    <div class="scout-card">
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <h4 class="text-xs font-black text-white">${p.n}</h4>
                                <p class="text-[9px] text-gray-500">${p.c} | ${p.p}</p>
                            </div>
                            <span class="text-[9px] text-green-400 font-bold">${p.v}</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-[8px] bg-blue-900/50 text-blue-300 px-2 py-0.5 rounded uppercase font-black">${p.r}</span>
                            <button onclick="addToPool('${p.n}')" class="text-[9px] bg-white text-black px-3 py-1 rounded-lg font-black hover:bg-blue-600 hover:text-white transition">KADROYA EKLE</button>
                        </div>
                    </div>
                `;
            });
        }

        function renderPitch() {
            const container = document.getElementById('pitchPlayers');
            container.innerHTML = '';
            formations[currentMode].forEach((pos, i) => {
                const div = document.createElement('div');
                div.className = 'player-slot';
                div.style.bottom = pos.b; div.style.left = pos.l;
                div.innerHTML = `
                    <div class="text-[8px] font-black text-gray-500 uppercase mb-1">${pos.p}</div>
                    <div class="kit-icon" draggable="true" 
                         ondragstart="handleDragStart(event, ${i})" 
                         ondrop="handleDrop(event, ${i})" 
                         ondragover="event.preventDefault(); this.parentElement.classList.add('drag-over')" 
                         ondragleave="this.parentElement.classList.remove('drag-over')">
                    </div>
                    <div class="player-name-label">${squad[i]}</div>
                `;
                container.appendChild(div);
            });
        }

        function handleDragStart(ev, index) {
            ev.dataTransfer.setData("sourceIndex", index);
            ev.dataTransfer.setData("playerName", index === -1 ? ev.target.innerText.trim() : squad[index]);
            ev.dataTransfer.setData("type", index === -1 ? "pool" : "pitch");
        }

        function handleDrop(ev, targetIndex) {
            ev.preventDefault();
            document.querySelectorAll('.player-slot').forEach(el => el.classList.remove('drag-over'));
            
            const sourceIndex = ev.dataTransfer.getData("sourceIndex");
            const playerName = ev.dataTransfer.getData("playerName");
            const type = ev.dataTransfer.getData("type");

            if (playerName === "---") return;

            if (type === "pitch" && sourceIndex != targetIndex) {
                // Saha i√ßi Swap
                const temp = squad[targetIndex];
                squad[targetIndex] = squad[sourceIndex];
                squad[sourceIndex] = temp;
            } else if (type === "pool") {
                // Havuzdan sahaya
                if (squad[targetIndex] !== "---") pool.push(squad[targetIndex]);
                squad[targetIndex] = playerName;
                pool = pool.filter(p => p !== playerName);
            }
            renderBench(); renderPitch();
        }

        function addToPool(n) { if(!pool.includes(n)) { pool.push(n); renderBench(); } }
        
        function renderBench() {
            document.getElementById('bench').innerHTML = pool.map(n => `
                <div class="bench-item" draggable="true" ondragstart="handleDragStart(event, -1)">${n}</div>
            `).join('');
        }

        function switchTacticMode(mode) {
            currentMode = mode;
            document.getElementById('btnAtk').className = mode === 'attack' ? 'flex-1 py-3 text-[10px] font-black rounded-xl bg-green-700 text-white' : 'flex-1 py-3 text-[10px] font-black rounded-xl text-gray-500';
            document.getElementById('btnDef').className = mode === 'defense' ? 'flex-1 py-3 text-[10px] font-black rounded-xl bg-red-900 text-white' : 'flex-1 py-3 text-[10px] font-black rounded-xl text-gray-500';
            document.getElementById('pitch').className = mode === 'defense' ? 'pitch defensive' : 'pitch';
            renderPitch();
        }

        renderBench();
        renderPitch();
    </script>
</body>
</html>
